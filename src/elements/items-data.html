<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/polymerfire/firebase-firestore-mixin.html">
<dom-module id="items-data">
  <template>

  </template>
  <script>
    class ItemsData extends ReduxMixin(Polymer.FirestoreMixin(Polymer.Element)){
      static get is(){
        return 'items-data';
      }
      static get properties(){
        return {
          /**
          *Live items from firestore
          */
          items:{
            type:Array,
            collection:'item',
            noCache:true,
            observer:'_observeItems'
          },
          /**
          *Live bundles from firestore
          */
          bundles:{
            type:Array,
            collection:'bundle',
            noCache:true,
            observer:'_observeBundles'
          }
        }
      }
      static get actions(){
        return{
          loadItems:function(items){
            return {type:'LOAD_ITEMS',items:items}
          },
          loadBundles:function(bundles){
            return {type:'LOAD_BUNDLES',bundles:bundles}
          }
        }
      }
      _observeItems(newVal){
        if(!newVal)return;
        this.dispatch('loadItems',newVal);
      }
      _observeBundles(newVal){
        if(!newVal)return;
        this.dispatch('loadBundles',newVal);
      }

    }
    customElements.define(ItemsData.is,ItemsData);
  </script>
</dom-module>
