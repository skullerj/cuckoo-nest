<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/app-layout/app-grid/app-grid-style.html">
<link rel="import" href="../../bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="../../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../redux/actions/order-actions.html">
<link rel="import" href="../shared-styles.html">

<link rel="import" href="../elements/item-card.html">
<link rel="import" href="../elements/bundle-card.html">

<dom-module id="items-view">
  <template>
    <style include="shared-styles app-grid-style">
      :host {
        display: block;
        --app-grid-columns: 1;
        --app-grid-gutter: 12px;
        --app-grid-expandible-item-columns: 2;
      }
      div.nav{
        height: 64px;
        width: 100%;
        background-color: var(--light-primary-color);
      }
      div.outer-items{
        height: calc(100vh - 126px);
        width: 100%;
        overflow: auto;
        padding-bottom: 64px;
      }
      span.b-price{
        @apply --paper-font-title;
      }
      span.b-subprice{
        @apply --paper-font-caption;
      }
      paper-tab{
        --paper-tab-ink: var(--dark-secondary-color);
      }
      paper-tabs{
        --paper-tabs-selection-bar-color:var(--dark-secondary-color);
        background-color: var(--light-primary-color);
        color: var(--primary-text-color);
      }
    </style>
    <paper-tabs selected="{{tab}}" attr-for-selected="tab">
      <paper-tab tab="s">Solanas</paper-tab>
      <paper-tab tab="c">Combos</paper-tab>
      <paper-tab tab="e">Extras</paper-tab>
    </paper-tabs>
    <iron-pages selected="[[tab]]" attr-for-selected="tab">
      <section tab="s">
        <div class="outer-items app-grid">
          <template is="dom-repeat" items="[[items]]">
            <item-card item="[[item]]"> </item-card>
          </template>
        </div>
      </section>
      <section tab="c">
        <div class="outer-items app-grid">
          <template is="dom-repeat" items="[[bundles]]">
            <bundle-card bundle="[[item]]"></bundle-card>
          </template>
        </div>
      </section>
      <section tab="e">
        <div class="outer-items app-grid">
          <template is="dom-repeat" items="[[bundles]]">
            <item-card item="[[item]]"></item-card>
          </template>
        </div>
      </section>
    </iron-pages>
    <div class="bottom">
      <paper-icon-button icon="custom:chevron-left" class="self-center m1-r"></paper-icon-button>
      <div class="vertical flex">
        <span class="b-price">[[total]]</span>
      </div>
      <paper-button class="self-center" on-tap="nextPage">
        <span>Yaff.. sigamos</span>
        <iron-icon icon="custom:chevron-right"></iron-icon>
      </paper-button>
    </div>
  </template>

  <script>
    class ItemsView extends OrderActions(Polymer.Element) {
      static get is() { return 'items-view'; }
      static get properties(){
        return {
          tab:{
            type:String,
            value:'s'
          }
        }
      }
      nextPage(){
        redirect('/location');
      }

    }

    window.customElements.define(ItemsView.is, ItemsView);
  </script>
</dom-module>
